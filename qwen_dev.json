{
  "project_name": "Transaction-to-Close (TTC)",
  "created": "2026-02-13T10:56:33.712418",
  "model": "qwen2.5-coder:7b",
  "system_prompt": "You are a senior full-stack developer building Transaction-to-Close (TTC),\nan AI-powered real estate transaction coordinator.\n\nTech stack:\n- Frontend: React 18+ / TypeScript / Tailwind CSS / Zustand\n- Backend: Python 3.11+ / FastAPI / SQLAlchemy 2.0 / Alembic\n- Database: PostgreSQL 16+ / Redis 7+\n- Storage: AWS S3 (MinIO for local dev)\n- Email: Resend (REST API, React Email templates)\n- Auth: Clerk\n- Jobs: Celery + Redis\n- AI: Claude API (Anthropic) for contract parsing, email composition, inspection analysis\n- Containerization: Docker + Docker Compose\n\nCRITICAL OUTPUT FORMAT:\nYou MUST output code using file markers:\n===FILE: path/to/file.py===\n(contents)\n===END FILE===\n\nRULES:\n1. Output ONLY code wrapped in file markers.\n2. Type hints everywhere in Python. async/await for all DB and API operations.\n3. Production-quality \u2014 no placeholders, no TODOs.\n4. Environment variables for all secrets.",
  "phases": {
    "1": {
      "name": "Foundation & Contract Parsing",
      "steps": [
        {
          "id": "1.1",
          "title": "Project scaffolding & Docker Compose",
          "search": [
            "FastAPI Docker Compose PostgreSQL Redis MinIO 2025 setup"
          ],
          "prompt": "Create project scaffolding: docker-compose.yml (backend, frontend, postgres, redis, minio), backend/requirements.txt, backend/app/config.py (pydantic-settings), backend/app/main.py (FastAPI + CORS + health check), backend/Dockerfile, .env.example, .gitignore. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        },
        {
          "id": "1.2",
          "title": "Database models & migrations",
          "search": [
            "SQLAlchemy 2.0 async UUID models PostgreSQL 2025"
          ],
          "prompt": "Create SQLAlchemy 2.0 async models: users, transactions, parties, milestones, communications, inspection_analyses, inspection_items, amendments, email_templates. Include database.py (async engine), all model files, Alembic setup. UUID PKs, timestamps, proper FKs/cascades. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        },
        {
          "id": "1.3",
          "title": "Pydantic schemas & API endpoints",
          "prompt": "Create Pydantic schemas (transaction, party, common) and FastAPI routes: transactions CRUD + parse + confirm, parties CRUD. Include service layer. Auth middleware placeholder. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        },
        {
          "id": "1.4",
          "title": "S3 upload & Claude contract parser",
          "search": [
            "Anthropic Claude API Python SDK structured output 2025",
            "PyMuPDF PDF text extraction Python"
          ],
          "prompt": "Create S3/MinIO storage service, Claude API contract parser agent (with PDF text extraction via PyMuPDF, vision fallback for scanned PDFs, confidence scores, retry/backoff, 429 handling), parsing orchestration service, extraction schemas. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        },
        {
          "id": "1.5",
          "title": "Frontend scaffolding & dashboard",
          "search": [
            "React 18 TypeScript Tailwind Clerk auth setup 2025"
          ],
          "prompt": "Create React + TypeScript frontend: package.json, tsconfig, tailwind config, main.tsx (providers), App.tsx (router), API client, TypeScript types, Zustand store, Dashboard page, NewTransaction page, TransactionDetail page, FileUpload/PartyCard/ConfidenceBadge/Layout components. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        }
      ]
    },
    "2": {
      "name": "Communications Engine",
      "steps": [
        {
          "id": "2.1",
          "title": "Email Composer AI Agent",
          "prompt": "Create EmailComposer agent (Claude API, role-specific emails by representation side, cash/multi-party/dual handling), email generation service, email schemas. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        },
        {
          "id": "2.2",
          "title": "Resend integration & delivery",
          "search": [
            "Resend Python SDK email sending webhooks 2025"
          ],
          "prompt": "Create Resend email service (send with attachments, Reply-To agent email, idempotency keys, retry via Celery), email Celery tasks, webhook handler, email API routes. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        },
        {
          "id": "2.3",
          "title": "Email preview & send UI",
          "prompt": "Create EmailPreview page, EmailEditor component, CommunicationLog component, Settings page (signature config). Update TransactionDetail with Generate Emails flow. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        }
      ]
    },
    "3": {
      "name": "Milestone Tracking & Follow-Ups",
      "steps": [
        {
          "id": "3.1",
          "title": "Milestone engine",
          "prompt": "Create milestone service (auto-generate from contract dates, conditional for cash, closing date cascade, overdue detection), milestone API routes, milestone schemas. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        },
        {
          "id": "3.2",
          "title": "Celery reminders & follow-ups",
          "search": [
            "Celery beat periodic tasks Redis broker Python 2025"
          ],
          "prompt": "Create Celery app config, reminder tasks (check upcoming/overdue milestones), follow-up tasks (milestone completion triggers emails), notification service, beat schedule. Update docker-compose for workers. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        },
        {
          "id": "3.3",
          "title": "Milestone timeline UI",
          "prompt": "Create MilestoneTimeline, MilestoneCard, AddMilestone, NotificationBell components. Update TransactionDetail and Dashboard. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        }
      ]
    },
    "4": {
      "name": "Inspection Report Analysis",
      "steps": [
        {
          "id": "4.1",
          "title": "Inspection Analyzer AI Agent",
          "prompt": "Create InspectionAnalyzer agent (severity classification, cost estimates, safety review, executive summary, recommendations), inspection service, API routes, schemas. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        },
        {
          "id": "4.2",
          "title": "Inspection analysis UI",
          "prompt": "Create InspectionAnalysis page, InspectionSummary, FindingCard, SeverityBadge components. Update TransactionDetail. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        }
      ]
    },
    "5": {
      "name": "Polish, Integration & Launch Prep",
      "steps": [
        {
          "id": "5.1",
          "title": "Integration & error handling",
          "prompt": "Create unified router, error handler middleware, Clerk auth middleware, rate limiter. Wire integrations (confirm \u2192 milestones + emails, milestone complete \u2192 follow-ups, etc.). Create test fixtures and test files. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        },
        {
          "id": "5.2",
          "title": "UI polish & onboarding",
          "prompt": "Create LoadingSpinner, EmptyState, ErrorBoundary, Toast, Onboarding page, TransactionStatusBadge. Add proper loading/empty/error states to all pages. Wrap EVERY file in ===FILE: path=== / ===END FILE=== markers."
        }
      ]
    }
  },
  "cov_history": []
}